<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Toply - Recruitment Intelligence Platform</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        .similarity-bar {
            background: linear-gradient(90deg, #ef4444 0%, #f59e0b 30%, #10b981 70%, #059669 100%);
            height: 8px;
            border-radius: 4px;
        }
        .card-hover:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }
        .pulse-animation {
            animation: pulse 2s infinite;
        }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Header -->
    <header class="bg-white shadow-sm border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between items-center py-4">
                <div class="flex items-center">
                    <i class="fas fa-brain text-blue-600 text-2xl mr-3"></i>
                    <h1 class="text-2xl font-bold text-gray-900">Toply Intelligence Hub</h1>
                    <span class="ml-3 px-2 py-1 bg-blue-100 text-blue-800 text-xs rounded-full">AI-Powered</span>
                </div>
                <div class="flex items-center space-x-4">
                    <select id="userSelect" class="border rounded-md px-3 py-2 text-sm">
                        <option value="">Select User</option>
                        <option value="guest">ðŸ‘¤ Continue as Guest</option>
                        <option value="dana">Dana</option>
                        <option value="alexey">Alexey</option>
                        <option value="katinka">Katinka</option>
                        <option value="shiri">Shiri</option>
                        <option value="mika">Mika</option>
                        <option value="chen">Chen</option>
                        <option value="andrea">Andrea</option>
                        <option value="eszter">Eszter</option>
                        <option value="danana">Danana</option>
                    </select>
                    <button id="selectedCandidatesBtn" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700">
                        <i class="fas fa-list mr-2"></i>Selected (<span id="selectedCount">0</span>)
                    </button>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="bg-white border-b">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex space-x-8">
                <button class="nav-tab active border-b-2 border-blue-500 py-4 px-1 text-blue-600 font-medium" data-tab="dashboard">
                    <i class="fas fa-chart-dashboard mr-2"></i>Dashboard
                </button>
                <button class="nav-tab border-b-2 border-transparent py-4 px-1 text-gray-500 hover:text-gray-700" data-tab="search">
                    <i class="fas fa-search mr-2"></i>Smart Search
                </button>
                <button class="nav-tab border-b-2 border-transparent py-4 px-1 text-gray-500 hover:text-gray-700" data-tab="similarity">
                    <i class="fas fa-brain mr-2"></i>AI Similarity
                </button>
                <button class="nav-tab border-b-2 border-transparent py-4 px-1 text-gray-500 hover:text-gray-700" data-tab="sourcing">
                    <i class="fas fa-magic mr-2"></i>Auto-Sourcing
                </button>
                <button class="nav-tab border-b-2 border-transparent py-4 px-1 text-gray-500 hover:text-gray-700" data-tab="companies">
                    <i class="fas fa-building mr-2"></i>Companies
                </button>
                <button class="nav-tab border-b-2 border-transparent py-4 px-1 text-gray-500 hover:text-gray-700" data-tab="settings">
                    <i class="fas fa-cog mr-2"></i>Settings
                </button>
            </div>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="max-w-7xl mx-auto py-6 px-4 sm:px-6 lg:px-8">

        <!-- Dashboard Tab -->
        <div id="dashboard-tab" class="tab-content">
            <!-- User Status -->
            <div id="userStatus" class="mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg hidden">
                <div class="flex items-center">
                    <i class="fas fa-user-circle text-blue-600 text-xl mr-3"></i>
                    <span id="userWelcome" class="text-blue-800 font-medium"></span>
                </div>
            </div>

            <!-- Stats Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="card-hover bg-gradient-to-r from-red-500 to-red-600 p-6 rounded-lg shadow-md text-white cursor-pointer transition-all duration-200" onclick="showHotCompanies()">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-red-100">Hot Companies</p>
                            <p class="text-3xl font-bold">28</p>
                        </div>
                        <i class="fas fa-fire text-red-200 text-2xl"></i>
                    </div>
                    <p class="text-red-100 text-sm mt-2">Recent layoffs & exits</p>
                </div>

                <div class="card-hover bg-gradient-to-r from-green-500 to-green-600 p-6 rounded-lg shadow-md text-white cursor-pointer transition-all duration-200" onclick="showActiveCandidates()">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-green-100">Active Candidates</p>
                            <p class="text-3xl font-bold">100+</p>
                        </div>
                        <i class="fas fa-users text-green-200 text-2xl"></i>
                    </div>
                    <p class="text-green-100 text-sm mt-2">Ready for contact</p>
                </div>

                <div class="card-hover bg-gradient-to-r from-purple-500 to-purple-600 p-6 rounded-lg shadow-md text-white cursor-pointer transition-all duration-200" onclick="showTopProfiles()">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-purple-100">TOP Profiles</p>
                            <p class="text-3xl font-bold" id="topProfilesCount">0</p>
                        </div>
                        <i class="fas fa-star text-purple-200 text-2xl"></i>
                    </div>
                    <p class="text-purple-100 text-sm mt-2">Scorely rated</p>
                </div>

                <div class="card-hover bg-gradient-to-r from-blue-500 to-blue-600 p-6 rounded-lg shadow-md text-white cursor-pointer transition-all duration-200" onclick="showGoodProfiles()">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-blue-100">GOOD Profiles</p>
                            <p class="text-3xl font-bold" id="goodProfilesCount">0</p>
                        </div>
                        <i class="fas fa-thumbs-up text-blue-200 text-2xl"></i>
                    </div>
                    <p class="text-blue-100 text-sm mt-2">Scorely rated</p>
                </div>
            </div>

            <!-- Priority Recommendations -->
            <div class="bg-white p-6 rounded-lg shadow-md mb-8">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">
                    <i class="fas fa-bullseye text-orange-500 mr-2"></i>Today's Priority Recommendations
                </h3>
                <div class="space-y-4">
                    <div class="p-4 bg-red-50 border-l-4 border-red-500 rounded">
                        <h4 class="font-medium text-red-800">Contact candidates from Microsoft immediately</h4>
                        <p class="text-red-600 text-sm">3 active candidates + recent layoffs = 85% response rate expected</p>
                    </div>
                    <div class="p-4 bg-yellow-50 border-l-4 border-yellow-500 rounded">
                        <h4 class="font-medium text-yellow-800">Unity talent surge detected</h4>
                        <p class="text-yellow-600 text-sm">3 candidates from Unity - consider Gaming/Mobile opportunities</p>
                    </div>
                    <div class="p-4 bg-blue-50 border-l-4 border-blue-500 rounded">
                        <h4 class="font-medium text-blue-800">Security sector opportunity</h4>
                        <p class="text-blue-600 text-sm">Review 12 new Security professionals this week</p>
                    </div>
                </div>
            </div>

            <!-- Market Intelligence -->
            <div class="bg-white p-6 rounded-lg shadow-md">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">
                    <i class="fas fa-chart-line text-green-500 mr-2"></i>Market Intelligence
                </h3>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div>
                        <h4 class="font-medium text-gray-800 mb-3">This Week's Intelligence</h4>
                        <ul class="space-y-2 text-sm text-gray-600">
                            <li><i class="fas fa-arrow-up text-green-500 mr-2"></i>Security sector: 23% more active candidates</li>
                            <li><i class="fas fa-fire text-red-500 mr-2"></i>Backend roles: High demand detected</li>
                            <li><i class="fas fa-chart-line text-blue-500 mr-2"></i>Microsoft candidates: 85% response rate</li>
                        </ul>
                    </div>
                    <div>
                        <h4 class="font-medium text-gray-800 mb-3">Best Timing Recommendations</h4>
                        <ul class="space-y-2 text-sm text-gray-600">
                            <li><i class="fas fa-clock text-orange-500 mr-2"></i>Wiz candidates: Contact now (layoffs detected)</li>
                            <li><i class="fas fa-calendar text-purple-500 mr-2"></i>Microsoft window: Next 2 weeks optimal</li>
                            <li><i class="fas fa-trending-up text-green-500 mr-2"></i>Q1 hiring surge: Prepare candidate pipeline</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- AI Similarity Tab -->
        <div id="similarity-tab" class="tab-content hidden">
            <div class="bg-white p-6 rounded-lg shadow-md mb-6">
                <h2 class="text-xl font-semibold text-gray-900 mb-4">
                    <i class="fas fa-brain text-purple-500 mr-2"></i>AI Similarity Search
                </h2>

                <!-- Upload Section -->
                <div class="mb-6">
                    <h3 class="text-lg font-medium text-gray-800 mb-3">Upload Scorely Results</h3>
                    <div class="border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-gray-400 transition-colors">
                        <input type="file" id="scorelyUpload" accept=".json,.csv" class="hidden">
                        <label for="scorelyUpload" class="cursor-pointer">
                            <i class="fas fa-cloud-upload-alt text-gray-400 text-3xl mb-3"></i>
                            <p class="text-gray-600">Drag & drop Scorely JSON file here</p>
                            <p class="text-gray-500 text-sm">or click to browse</p>
                            <p class="text-gray-400 text-xs mt-2">Supports: .json, .csv files with embeddings</p>
                        </label>
                    </div>
                </div>

                <!-- Search Input -->
                <div class="mb-6">
                    <h3 class="text-lg font-medium text-gray-800 mb-3">Find Similar Candidates</h3>
                    <textarea id="similarityInput" rows="4" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Enter job description, candidate profile, or requirements...

Example:
- Senior Backend Engineer with Python, AWS, 5+ years
- Looking for profiles similar to our best developer
- Find candidates from companies like Wiz"></textarea>
                    <button id="findSimilarBtn" class="mt-3 bg-purple-600 text-white px-6 py-2 rounded-md hover:bg-purple-700 disabled:bg-gray-400">
                        <i class="fas fa-search mr-2"></i>Find Similar Candidates
                    </button>
                </div>

                <!-- Results -->
                <div id="similarityResults" class="hidden">
                    <h3 class="text-lg font-medium text-gray-800 mb-3">Similarity Results</h3>
                    <div class="overflow-x-auto">
                        <table class="min-w-full divide-y divide-gray-200">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Select</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Candidate</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Overall Match</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Skills</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Company</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Title</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Experience</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Details</th>
                                </tr>
                            </thead>
                            <tbody id="similarityTableBody" class="bg-white divide-y divide-gray-200">
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Auto-Sourcing Tab -->
        <div id="sourcing-tab" class="tab-content hidden">
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- Success Patterns -->
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h2 class="text-xl font-semibold text-gray-900 mb-4">
                        <i class="fas fa-chart-bar text-green-500 mr-2"></i>Success Patterns Analysis
                    </h2>
                    
                    <div class="space-y-6">
                        <div>
                            <h3 class="font-medium text-gray-800 mb-3">Top Companies</h3>
                            <div class="space-y-2">
                                <div class="flex justify-between items-center p-2 bg-gray-50 rounded">
                                    <span class="text-sm">Wiz</span>
                                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">3 TOP</span>
                                </div>
                                <div class="flex justify-between items-center p-2 bg-gray-50 rounded">
                                    <span class="text-sm">Cybereason</span>
                                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">2 TOP</span>
                                </div>
                                <div class="flex justify-between items-center p-2 bg-gray-50 rounded">
                                    <span class="text-sm">Astrix</span>
                                    <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">2 TOP</span>
                                </div>
                            </div>
                        </div>

                        <div>
                            <h3 class="font-medium text-gray-800 mb-3">Top Skills</h3>
                            <div class="space-y-2">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm">Python</span>
                                    <span class="text-sm font-medium text-blue-600">85%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm">AWS</span>
                                    <span class="text-sm font-medium text-blue-600">78%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm">Kubernetes</span>
                                    <span class="text-sm font-medium text-blue-600">71%</span>
                                </div>
                            </div>
                        </div>

                        <div>
                            <h3 class="font-medium text-gray-800 mb-3">Top Titles</h3>
                            <div class="space-y-2">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm">Backend Engineer</span>
                                    <span class="text-sm font-medium text-purple-600">65%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm">Senior Developer</span>
                                    <span class="text-sm font-medium text-purple-600">58%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm">Tech Lead</span>
                                    <span class="text-sm font-medium text-purple-600">42%</span>
                                </div>
                            </div>
                        </div>

                        <div>
                            <h3 class="font-medium text-gray-800 mb-3">Experience</h3>
                            <div class="space-y-2">
                                <div class="flex justify-between items-center">
                                    <span class="text-sm">4-6 years</span>
                                    <span class="text-sm font-medium text-orange-600">68%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm">7-10 years</span>
                                    <span class="text-sm font-medium text-orange-600">25%</span>
                                </div>
                                <div class="flex justify-between items-center">
                                    <span class="text-sm">3-4 years</span>
                                    <span class="text-sm font-medium text-orange-600">15%</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Boolean Queries -->
                <div class="bg-white p-6 rounded-lg shadow-md">
                    <h2 class="text-xl font-semibold text-gray-900 mb-4">
                        <i class="fas fa-code text-blue-500 mr-2"></i>Generated Boolean Queries
                    </h2>

                    <div class="space-y-6">
                        <div>
                            <h3 class="font-medium text-gray-800 mb-3">LinkedIn Boolean Query</h3>
                            <div class="bg-gray-50 p-4 rounded-lg border">
                                <code id="linkedinBoolean" class="text-sm text-gray-800">
                                    ("Backend Engineer" OR "Senior Developer") ("Python" OR "AWS" OR "Kubernetes") ("Wiz" OR "Cybereason" OR "Astrix")
                                </code>
                            </div>
                            <div class="flex space-x-2 mt-3">
                                <button onclick="copyToClipboard('linkedinBoolean')" class="bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 text-sm">
                                    <i class="fas fa-copy mr-2"></i>Copy
                                </button>
                                <button onclick="openLinkedInSearch('linkedinBoolean')" class="bg-blue-500 text-white px-4 py-2 rounded-md hover:bg-blue-600 text-sm">
                                    <i class="fab fa-linkedin mr-2"></i>Open in LinkedIn
                                </button>
                            </div>
                        </div>

                        <div>
                            <h3 class="font-medium text-gray-800 mb-3">Google Boolean Query</h3>
                            <div class="bg-gray-50 p-4 rounded-lg border">
                                <code id="googleBoolean" class="text-sm text-gray-800">
                                    "Backend Engineer" OR "Senior Developer" "Python" "AWS" site:linkedin.com
                                </code>
                            </div>
                            <div class="flex space-x-2 mt-3">
                                <button onclick="copyToClipboard('googleBoolean')" class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700 text-sm">
                                    <i class="fas fa-copy mr-2"></i>Copy
                                </button>
                                <button onclick="openGoogleSearch('googleBoolean')" class="bg-red-500 text-white px-4 py-2 rounded-md hover:bg-red-600 text-sm">
                                    <i class="fab fa-google mr-2"></i>Open in Google
                                </button>
                            </div>
                        </div>

                        <div>
                            <h3 class="font-medium text-gray-800 mb-4">Smart Sourcing Suggestions</h3>
                            <div class="space-y-3">
                                <div class="p-3 bg-blue-50 border border-blue-200 rounded-lg">
                                    <p class="text-sm text-blue-800 font-medium">Try targeting Backend Engineers at Check Point</p>
                                    <p class="text-xs text-blue-600">Similar security company profile to your successful Wiz hires</p>
                                </div>
                                <div class="p-3 bg-green-50 border border-green-200 rounded-lg">
                                    <p class="text-sm text-green-800 font-medium">Look for Python developers with 5+ years experience</p>
                                    <p class="text-xs text-green-600">82% success rate in your previous TOP-rated candidates</p>
                                </div>
                                <div class="p-3 bg-purple-50 border border-purple-200 rounded-lg">
                                    <p class="text-sm text-purple-800 font-medium">Consider DevOps from Security companies</p>
                                    <p class="text-xs text-purple-600">80% skill overlap with your successful Backend Engineer hires</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Smart Search Tab -->
        <div id="search-tab" class="tab-content hidden">
            <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-xl font-semibold text-gray-900 mb-6">
                    <i class="fas fa-search text-blue-500 mr-2"></i>Smart Candidate Search
                </h2>

                <!-- Search Filters -->
                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Job Title / Role</label>
                        <input type="text" id="jobTitleFilter" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Backend Engineer, DevOps...">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Skills</label>
                        <input type="text" id="skillsFilter" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder='Use "," for AND, "OR" for either'>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Experience Level</label>
                        <select id="experienceFilter" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">Any Experience</option>
                            <option value="junior">Junior (1-3 years)</option>
                            <option value="mid">Mid-level (3-5 years)</option>
                            <option value="senior">Senior (5-8 years)</option>
                            <option value="lead">Lead (8+ years)</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Location</label>
                        <input type="text" id="locationFilter" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Tel Aviv, Remote...">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Company Filter</label>
                        <input type="text" id="companyFilter" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Current or previous company">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Score Range</label>
                        <select id="scoreFilter" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500">
                            <option value="">Any Score</option>
                            <option value="90-100">90-100 (Excellent)</option>
                            <option value="80-89">80-89 (Very Good)</option>
                            <option value="70-79">70-79 (Good)</option>
                            <option value="60-69">60-69 (Fair)</option>
                        </select>
                    </div>
                </div>

                <!-- Quick Filters -->
                <div class="flex flex-wrap gap-2 mb-6">
                    <label class="flex items-center">
                        <input type="checkbox" id="lookingFilter" class="mr-2">
                        <span class="text-sm text-gray-700">Show only LOOKING candidates</span>
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" id="hotCompanyFilter" class="mr-2">
                        <span class="text-sm text-gray-700">Show only from Hot Companies</span>
                    </label>
                    <label class="flex items-center">
                        <input type="checkbox" id="unviewedFilter" class="mr-2">
                        <span class="text-sm text-gray-700">Show only unviewed (this week)</span>
                    </label>
                </div>

                <!-- Search Button -->
                <button id="searchBtn" class="bg-blue-600 text-white px-6 py-2 rounded-md hover:bg-blue-700 mb-6">
                    <i class="fas fa-search mr-2"></i>Search Candidates
                </button>

                <!-- Results Table -->
                <div class="overflow-x-auto">
                    <table class="min-w-full divide-y divide-gray-200">
                        <thead class="bg-gray-50">
                            <tr>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Select</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Candidate</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Company</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Title</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Experience</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Score</th>
                                <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                            </tr>
                        </thead>
                        <tbody id="searchResults" class="bg-white divide-y divide-gray-200">
                            <!-- Results will be populated here -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Companies Tab -->
        <div id="companies-tab" class="tab-content hidden">
            <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-xl font-semibold text-gray-900 mb-6">
                    <i class="fas fa-building text-green-500 mr-2"></i>Companies Intelligence
                </h2>

                <!-- Filters -->
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Industry</label>
                        <select id="industryFilter" class="w-full border border-gray-300 rounded-md px-3 py-2">
                            <option value="">All Industries</option>
                            <option value="cybersecurity">Cybersecurity</option>
                            <option value="fintech">Fintech</option>
                            <option value="ai">AI/ML</option>
                            <option value="saas">SaaS</option>
                            <option value="gaming">Gaming</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Company Size</label>
                        <select id="sizeFilter" class="w-full border border-gray-300 rounded-md px-3 py-2">
                            <option value="">All Sizes</option>
                            <option value="startup">Startup (1-50)</option>
                            <option value="medium">Medium (51-500)</option>
                            <option value="large">Large (500+)</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
                        <select id="statusFilter" class="w-full border border-gray-300 rounded-md px-3 py-2">
                            <option value="">All Status</option>
                            <option value="hot">Hot Companies</option>
                            <option value="unicorn">Unicorn</option>
                            <option value="public">Public</option>
                            <option value="private">Private</option>
                        </select>
                    </div>
                </div>

                <!-- Hot Companies Section -->
                <div class="mb-8">
                    <h3 class="text-lg font-medium text-gray-800 mb-4">
                        <i class="fas fa-fire text-red-500 mr-2"></i>Hot Companies This Week
                    </h3>
                    <p class="text-gray-600 text-sm mb-4">Companies with recent activity - higher candidate response rates expected</p>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="hotCompaniesList">
                        <!-- Hot companies will be populated here -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Tab -->
        <div id="settings-tab" class="tab-content hidden">
            <div class="bg-white p-6 rounded-lg shadow-md">
                <h2 class="text-xl font-semibold text-gray-900 mb-6">
                    <i class="fas fa-cog text-gray-500 mr-2"></i>Settings & Integrations
                </h2>

                <!-- Google Sheets Integration -->
                <div class="mb-8">
                    <h3 class="text-lg font-medium text-gray-800 mb-4">Google Sheets Integration</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Google Sheets API Key</label>
                            <input type="password" id="googleApiKey" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Enter your Google Sheets API key">
                        </div>
                        <button id="testGoogleConnection" class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700">
                            <i class="fas fa-check mr-2"></i>Test Connection
                        </button>
                        <div id="googleConnectionStatus" class="hidden"></div>
                    </div>
                </div>

                <!-- OpenAI Integration -->
                <div class="mb-8">
                    <h3 class="text-lg font-medium text-gray-800 mb-4">OpenAI Integration</h3>
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">OpenAI API Key</label>
                            <input type="password" id="openaiApiKey" class="w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Enter your OpenAI API key">
                        </div>
                        <div>
                            <label class="block text-sm font-medium text-gray-700 mb-2">Model Selection</label>
                            <select id="openaiModel" class="w-full border border-gray-300 rounded-md px-3 py-2">
                                <option value="text-embedding-3-small">text-embedding-3-small (Recommended)</option>
                                <option value="text-embedding-3-large">text-embedding-3-large</option>
                                <option value="text-embedding-ada-002">text-embedding-ada-002</option>
                            </select>
                        </div>
                        <button id="testOpenAIConnection" class="bg-green-600 text-white px-4 py-2 rounded-md hover:bg-green-700">
                            <i class="fas fa-check mr-2"></i>Test Connection
                        </button>
                        <div id="openaiConnectionStatus" class="hidden"></div>
                    </div>
                </div>

                <!-- Data Sources -->
                <div class="mb-8">
                    <h3 class="text-lg font-medium text-gray-800 mb-4">Data Sources</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                            <div>
                                <h4 class="font-medium text-gray-800">Active Candidates</h4>
                                <p class="text-sm text-gray-600">100+ candidates actively looking for opportunities</p>
                            </div>
                            <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Connected</span>
                        </div>
                        <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                            <div>
                                <h4 class="font-medium text-gray-800">Hot Companies</h4>
                                <p class="text-sm text-gray-600">28 companies with recent market events</p>
                            </div>
                            <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Connected</span>
                        </div>
                        <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                            <div>
                                <h4 class="font-medium text-gray-800">Companies Database</h4>
                                <p class="text-sm text-gray-600">396 companies with detailed intelligence</p>
                            </div>
                            <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">Connected</span>
                        </div>
                        <div class="flex items-center justify-between p-4 border border-gray-200 rounded-lg">
                            <div>
                                <h4 class="font-medium text-gray-800">Scorely Results</h4>
                                <p class="text-sm text-gray-600">TOP and GOOD candidate profiles with embeddings</p>
                            </div>
                            <span class="bg-yellow-100 text-yellow-800 px-2 py-1 rounded-full text-xs">Upload Required</span>
                        </div>
                    </div>
                </div>

                <!-- Advanced Settings -->
                <div>
                    <h3 class="text-lg font-medium text-gray-800 mb-4">Advanced Settings</h3>
                    <div class="space-y-4">
                        <div class="flex items-center justify-between">
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Similarity Threshold</label>
                                <p class="text-xs text-gray-500">Minimum similarity score to show results</p>
                            </div>
                            <input type="range" id="similarityThreshold" min="0.5" max="1.0" step="0.05" value="0.7" class="w-32">
                        </div>
                        <div class="flex items-center justify-between">
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Auto-Save Settings</label>
                                <p class="text-xs text-gray-500">Save settings automatically</p>
                            </div>
                            <input type="checkbox" id="autoSave" checked class="toggle">
                        </div>
                        <div class="flex items-center justify-between">
                            <div>
                                <label class="block text-sm font-medium text-gray-700">Cache Embeddings</label>
                                <p class="text-xs text-gray-500">Store embeddings locally to save API costs</p>
                            </div>
                            <input type="checkbox" id="cacheEmbeddings" checked class="toggle">
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </main>

    <!-- Selected Candidates Sidebar -->
    <div id="selectedSidebar" class="fixed right-0 top-0 h-full w-80 bg-white shadow-lg transform translate-x-full transition-transform duration-300 ease-in-out z-50">
        <div class="p-6 border-b">
            <div class="flex items-center justify-between">
                <h3 class="text-lg font-semibold text-gray-900">Selected Candidates</h3>
                <button id="closeSidebar" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>
        <div class="p-6 flex-1 overflow-y-auto">
            <div id="selectedCandidatesList" class="space-y-4">
                <div class="text-center text-gray-500 py-8">
                    <i class="fas fa-users text-gray-300 text-3xl mb-3"></i>
                    <p>No candidates selected</p>
                </div>
            </div>
        </div>
        <div class="p-6 border-t">
            <div class="space-y-2">
                <button id="exportCSV" class="w-full bg-blue-600 text-white py-2 rounded-md hover:bg-blue-700">
                    <i class="fas fa-download mr-2"></i>Export CSV
                </button>
                <button id="exportLinkedIn" class="w-full bg-blue-500 text-white py-2 rounded-md hover:bg-blue-600">
                    <i class="fab fa-linkedin mr-2"></i>Export LinkedIn URLs
                </button>
                <button id="clearAll" class="w-full bg-gray-600 text-white py-2 rounded-md hover:bg-gray-700">
                    <i class="fas fa-trash mr-2"></i>Clear All
                </button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div id="toast" class="fixed top-4 right-4 z-50 transform translate-x-full transition-transform duration-300">
        <div class="bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg">
            <i class="fas fa-check mr-2"></i>
            <span id="toastMessage">Action completed successfully!</span>
        </div>
    </div>

    <script>
        // Global variables
        let selectedCandidates = [];
        let viewedCandidates = {};
        let currentUser = '';
        let scorelyCandidates = [];
        
        // Sample data
        const activeCandidates = [
            { name: 'Shira Koenigsberg', company: 'Claroty', title: 'Senior Backend Engineer', experience: '5 years', status: 'LOOKING', linkedin: 'https://linkedin.com/in/shira-koenigsberg' },
            { name: 'Vladimir Feldman', company: 'Cellebrite', title: 'DevOps Lead', experience: '7 years', status: 'LOOKING', linkedin: 'https://linkedin.com/in/vladimirfeldman' },
            { name: 'Nadav Shemtov', company: 'Open', title: 'Full Stack Developer', experience: '4 years', status: 'LOOKING', linkedin: 'https://linkedin.com/in/nadav-shemtov' },
            { name: 'Alon Mizrahi', company: 'Microsoft', title: 'Senior Backend', experience: '6 years', status: 'LOOKING', linkedin: 'https://linkedin.com/in/alonmiz' },
            { name: 'Roey Weizman', company: 'Microsoft', title: 'Backend Engineer', experience: '5 years', status: 'LOOKING', linkedin: 'https://linkedin.com/in/roey-weizman' }
        ];

        const hotCompanies = [
            { name: 'Microsoft', type: 'Layoffs', industry: 'Big Tech', employees: 10000, reason: 'Recent layoffs announced' },
            { name: 'Wiz', type: 'Silent Exodus', industry: 'Cybersecurity', employees: 750, reason: 'Multiple senior departures' },
            { name: 'Unity', type: 'Layoffs', industry: 'Gaming', employees: 7000, reason: 'Restructuring and layoffs' },
            { name: 'Cybereason', type: 'Layoffs', industry: 'Cybersecurity', employees: 750, reason: 'Cost reduction measures' }
        ];

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            initializeEventListeners();
            loadSettings();
            showTab('dashboard');
            loadHotCompanies();
        });

        // Event listeners
        function initializeEventListeners() {
            // Tab navigation
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.addEventListener('click', (e) => {
                    const tabName = e.target.getAttribute('data-tab');
                    showTab(tabName);
                });
            });

            // User selection
            document.getElementById('userSelect').addEventListener('change', function() {
                const selectedUser = this.value;
                updateUserStatus(selectedUser);
            });

            // Selected candidates sidebar
            document.getElementById('selectedCandidatesBtn').addEventListener('click', toggleSidebar);
            document.getElementById('closeSidebar').addEventListener('click', toggleSidebar);

            // Settings
            document.getElementById('testGoogleConnection').addEventListener('click', testGoogleConnection);
            document.getElementById('testOpenAIConnection').addEventListener('click', testOpenAIConnection);

            // Auto-save settings
            ['googleApiKey', 'openaiApiKey', 'openaiModel', 'similarityThreshold'].forEach(id => {
                document.getElementById(id).addEventListener('change', saveSettings);
            });

            // Scorely upload
            document.getElementById('scorelyUpload').addEventListener('change', handleScorelyUpload);
            document.getElementById('findSimilarBtn').addEventListener('click', findSimilarCandidates);

            // Search
            document.getElementById('searchBtn').addEventListener('click', performSearch);

            // Export functions
            document.getElementById('exportCSV').addEventListener('click', exportToCSV);
            document.getElementById('exportLinkedIn').addEventListener('click', exportLinkedInURLs);
            document.getElementById('clearAll').addEventListener('click', clearSelectedCandidates);
        }

        // Tab management
        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.classList.add('hidden');
            });

            // Show selected tab
            document.getElementById(tabName + '-tab').classList.remove('hidden');

            // Update navigation
            document.querySelectorAll('.nav-tab').forEach(tab => {
                tab.classList.remove('active', 'border-blue-500', 'text-blue-600');
                tab.classList.add('border-transparent', 'text-gray-500');
            });

            const activeTab = document.querySelector(`[data-tab="${tabName}"]`);
            activeTab.classList.add('active', 'border-blue-500', 'text-blue-600');
            activeTab.classList.remove('border-transparent', 'text-gray-500');
        }

        // User management
        function updateUserStatus(user) {
            currentUser = user;
            const userStatus = document.getElementById('userStatus');
            const userWelcome = document.getElementById('userWelcome');

            if (user && user !== '') {
                userStatus.classList.remove('hidden');
                if (user === 'guest') {
                    userWelcome.textContent = 'ðŸšª You\'re browsing as Guest - Select your name above for personal tracking';
                    userStatus.className = 'mb-6 p-4 bg-gray-50 border border-gray-200 rounded-lg';
                } else {
                    userWelcome.textContent = `ðŸ‘‹ Welcome ${user.charAt(0).toUpperCase() + user.slice(1)}! Your personal workspace is active`;
                    userStatus.className = 'mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg';
                }
            } else {
                userStatus.classList.add('hidden');
            }
        }

        // Settings management
        function saveSettings() {
            const settings = {
                googleApiKey: document.getElementById('googleApiKey').value,
                openaiApiKey: document.getElementById('openaiApiKey').value,
                openaiModel: document.getElementById('openaiModel').value,
                similarityThreshold: document.getElementById('similarityThreshold').value
            };
            localStorage.setItem('toplySettings', JSON.stringify(settings));
        }

        function loadSettings() {
            const settings = JSON.parse(localStorage.getItem('toplySettings') || '{}');
            if (settings.googleApiKey) {
                document.getElementById('googleApiKey').value = settings.googleApiKey;
            }
            if (settings.openaiApiKey) {
                document.getElementById('openaiApiKey').value = settings.openaiApiKey;
            }
            if (settings.openaiModel) {
                document.getElementById('openaiModel').value = settings.openaiModel;
            }
            if (settings.similarityThreshold) {
                document.getElementById('similarityThreshold').value = settings.similarityThreshold;
            }
        }

        // Connection testing
        function testGoogleConnection() {
            const apiKey = document.getElementById('googleApiKey').value;
            const status = document.getElementById('googleConnectionStatus');
            
            if (!apiKey) {
                showConnectionStatus('googleConnectionStatus', false, 'Please enter an API key');
                return;
            }

            // Simulate API test
            showConnectionStatus('googleConnectionStatus', true, 'Connection successful!');
            saveSettings();
        }

        function testOpenAIConnection() {
            const apiKey = document.getElementById('openaiApiKey').value;
            const status = document.getElementById('openaiConnectionStatus');
            
            if (!apiKey) {
                showConnectionStatus('openaiConnectionStatus', false, 'Please enter an API key');
                return;
            }

            // Simulate API test
            showConnectionStatus('openaiConnectionStatus', true, 'Connection successful!');
            saveSettings();
        }

        function showConnectionStatus(elementId, success, message) {
            const element = document.getElementById(elementId);
            element.classList.remove('hidden');
            element.className = success ? 
                'flex items-center text-green-600 text-sm mt-2' : 
                'flex items-center text-red-600 text-sm mt-2';
            element.innerHTML = `<i class="fas fa-${success ? 'check' : 'times'} mr-2"></i>${message}`;
        }

        // Boolean query functions
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            const text = element.textContent.trim();
            
            if (navigator.clipboard) {
                navigator.clipboard.writeText(text).then(() => {
                    showToast('Copied to clipboard!');
                }).catch(() => {
                    fallbackCopyToClipboard(text);
                });
            } else {
                fallbackCopyToClipboard(text);
            }
        }

        function fallbackCopyToClipboard(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            document.body.appendChild(textArea);
            textArea.select();
            try {
                document.execCommand('copy');
                showToast('Copied to clipboard!');
            } catch (err) {
                showToast('Failed to copy', 'error');
            }
            document.body.removeChild(textArea);
        }

        function openLinkedInSearch(elementId) {
            const element = document.getElementById(elementId);
            const query = element.textContent.trim();
            const encodedQuery = encodeURIComponent(query);
            const linkedInURL = `https://www.linkedin.com/search/people/?keywords=${encodedQuery}`;
            window.open(linkedInURL, '_blank');
        }

        function openGoogleSearch(elementId) {
            const element = document.getElementById(elementId);
            const query = element.textContent.trim();
            const encodedQuery = encodeURIComponent(query);
            const googleURL = `https://www.google.com/search?q=${encodedQuery}`;
            window.open(googleURL, '_blank');
        }

        // Dashboard functions
        function showHotCompanies() {
            showTab('companies');
        }

        function showActiveCandidates() {
            showTab('search');
            document.getElementById('lookingFilter').checked = true;
            performSearch();
        }

        function showTopProfiles() {
            showTab('similarity');
        }

        function showGoodProfiles() {
            showTab('similarity');
        }

        // Load hot companies
        function loadHotCompanies() {
            const container = document.getElementById('hotCompaniesList');
            if (!container) return;

            container.innerHTML = hotCompanies.map(company => `
                <div class="p-4 border border-red-200 rounded-lg bg-red-50 hover:bg-red-100 transition-colors cursor-pointer">
                    <div class="flex justify-between items-start mb-2">
                        <h4 class="font-medium text-gray-900">${company.name}</h4>
                        <span class="bg-red-100 text-red-800 px-2 py-1 rounded-full text-xs">${company.type}</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-1">${company.industry} â€¢ ${company.employees} employees</p>
                    <p class="text-xs text-gray-500">${company.reason}</p>
                    <button onclick="findCandidatesFromCompany('${company.name}')" class="mt-2 text-red-600 hover:text-red-800 text-sm font-medium">
                        <i class="fas fa-search mr-1"></i>Find Candidates
                    </button>
                </div>
            `).join('');
        }

        function findCandidatesFromCompany(companyName) {
            showTab('search');
            document.getElementById('companyFilter').value = companyName;
            performSearch();
        }

        // Search functionality
        function performSearch() {
            const results = document.getElementById('searchResults');
            
            // Filter active candidates based on search criteria
            let filteredCandidates = [...activeCandidates];
            
            const lookingFilter = document.getElementById('lookingFilter').checked;
            if (lookingFilter) {
                filteredCandidates = filteredCandidates.filter(c => c.status === 'LOOKING');
            }

            const companyFilter = document.getElementById('companyFilter').value.toLowerCase();
            if (companyFilter) {
                filteredCandidates = filteredCandidates.filter(c => 
                    c.company.toLowerCase().includes(companyFilter)
                );
            }

            // Render results
            results.innerHTML = filteredCandidates.map(candidate => `
                <tr class="hover:bg-gray-50">
                    <td class="px-4 py-3">
                        <input type="checkbox" class="candidate-checkbox" data-candidate='${JSON.stringify(candidate)}'>
                    </td>
                    <td class="px-4 py-3">
                        <div class="font-medium text-gray-900">${candidate.name}</div>
                    </td>
                    <td class="px-4 py-3">
                        <span class="bg-green-100 text-green-800 px-2 py-1 rounded-full text-xs">
                            <i class="fas fa-eye mr-1"></i>${candidate.status}
                        </span>
                    </td>
                    <td class="px-4 py-3 text-gray-600">${candidate.company}</td>
                    <td class="px-4 py-3 text-gray-600">${candidate.title}</td>
                    <td class="px-4 py-3 text-gray-600">${candidate.experience}</td>
                    <td class="px-4 py-3">
                        <span class="bg-blue-100 text-blue-800 px-2 py-1 rounded-full text-xs">85</span>
                    </td>
                    <td class="px-4 py-3">
                        <a href="${candidate.linkedin}" target="_blank" class="text-blue-600 hover:text-blue-800">
                            <i class="fab fa-linkedin"></i>
                        </a>
                    </td>
                </tr>
            `).join('');

            // Add event listeners to checkboxes
            document.querySelectorAll('.candidate-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', handleCandidateSelection);
            });
        }

        // Candidate selection
        function handleCandidateSelection(event) {
            const checkbox = event.target;
            const candidate = JSON.parse(checkbox.getAttribute('data-candidate'));
            
            if (checkbox.checked) {
                if (!selectedCandidates.find(c => c.name === candidate.name)) {
                    selectedCandidates.push(candidate);
                }
            } else {
                selectedCandidates = selectedCandidates.filter(c => c.name !== candidate.name);
            }
            
            updateSelectedCandidatesDisplay();
        }

        function updateSelectedCandidatesDisplay() {
            document.getElementById('selectedCount').textContent = selectedCandidates.length;
            
            const list = document.getElementById('selectedCandidatesList');
            if (selectedCandidates.length === 0) {
                list.innerHTML = `
                    <div class="text-center text-gray-500 py-8">
                        <i class="fas fa-users text-gray-300 text-3xl mb-3"></i>
                        <p>No candidates selected</p>
                    </div>
                `;
            } else {
                list.innerHTML = selectedCandidates.map(candidate => `
                    <div class="p-3 border border-gray-200 rounded-lg">
                        <div class="flex justify-between items-start">
                            <div>
                                <h4 class="font-medium text-gray-900">${candidate.name}</h4>
                                <p class="text-sm text-gray-600">${candidate.company} â€¢ ${candidate.title}</p>
                            </div>
                            <button onclick="removeSelectedCandidate('${candidate.name}')" class="text-red-500 hover:text-red-700">
                                <i class="fas fa-times"></i>
                            </button>
                        </div>
                    </div>
                `).join('');
            }
        }

        function removeSelectedCandidate(name) {
            selectedCandidates = selectedCandidates.filter(c => c.name !== name);
            updateSelectedCandidatesDisplay();
            
            // Uncheck corresponding checkbox
            document.querySelectorAll('.candidate-checkbox').forEach(checkbox => {
                const candidate = JSON.parse(checkbox.getAttribute('data-candidate'));
                if (candidate.name === name) {
                    checkbox.checked = false;
                }
            });
        }

        // Sidebar management
        function toggleSidebar() {
            const sidebar = document.getElementById('selectedSidebar');
            sidebar.classList.toggle('translate-x-full');
        }

        // Export functions
        function exportToCSV() {
            if (selectedCandidates.length === 0) {
                showToast('No candidates selected', 'error');
                return;
            }

            const csvContent = [
                ['Name', 'Company', 'Title', 'Experience', 'Status', 'LinkedIn'],
                ...selectedCandidates.map(c => [c.name, c.company, c.title, c.experience, c.status, c.linkedin])
            ].map(row => row.map(field => `"${field}"`).join(',')).join('\n');

            downloadFile(csvContent, 'selected_candidates.csv', 'text/csv');
            showToast('CSV exported successfully!');
        }

        function exportLinkedInURLs() {
            if (selectedCandidates.length === 0) {
                showToast('No candidates selected', 'error');
                return;
            }

            const urls = selectedCandidates.map(c => c.linkedin).join('\n');
            downloadFile(urls, 'linkedin_urls.txt', 'text/plain');
            showToast('LinkedIn URLs exported!');
        }

        function downloadFile(content, filename, mimeType) {
            const blob = new Blob([content], { type: mimeType });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = filename;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        function clearSelectedCandidates() {
            selectedCandidates = [];
            updateSelectedCandidatesDisplay();
            
            // Uncheck all checkboxes
            document.querySelectorAll('.candidate-checkbox').forEach(checkbox => {
                checkbox.checked = false;
            });
        }

        // Scorely upload
        function handleScorelyUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    scorelyCandidates = data;
                    updateScorelyStats();
                    showToast('Scorely data uploaded successfully!');
                } catch (error) {
                    showToast('Error parsing file', 'error');
                }
            };
            reader.readAsText(file);
        }

        function updateScorelyStats() {
            const topCount = scorelyCandidates.filter(c => c.category === 'TOP').length;
            const goodCount = scorelyCandidates.filter(c => c.category === 'GOOD').length;
            
            document.getElementById('topProfilesCount').textContent = topCount;
            document.getElementById('goodProfilesCount').textContent = goodCount;
        }

        // AI Similarity
        function findSimilarCandidates() {
            const input = document.getElementById('similarityInput').value.trim();
            if (!input) {
                showToast('Please enter a job description or requirements', 'error');
                return;
            }

            if (scorelyCandidates.length === 0) {
                showToast('Please upload Scorely data first', 'error');
                return;
            }

            // Simulate similarity calculation
            const results = scorelyCandidates.map(candidate => ({
                ...candidate,
                similarity: Math.random() * 0.4 + 0.6, // Random similarity between 60-100%
                skillsMatch: Math.random() * 0.3 + 0.7,
                companyMatch: Math.random() * 0.3 + 0.7,
                titleMatch: Math.random() * 0.3 + 0.7,
                experienceMatch: Math.random() * 0.3 + 0.7
            })).sort((a, b) => b.similarity - a.similarity).slice(0, 10);

            displaySimilarityResults(results);
        }

        function displaySimilarityResults(results) {
            const container = document.getElementById('similarityResults');
            const tbody = document.getElementById('similarityTableBody');
            
            tbody.innerHTML = results.map(candidate => {
                const similarityPercent = Math.round(candidate.similarity * 100);
                const confidenceLevel = similarityPercent >= 85 ? 'HIGH' : similarityPercent >= 70 ? 'MEDIUM' : 'LOW';
                const confidenceColor = similarityPercent >= 85 ? 'text-green-600' : similarityPercent >= 70 ? 'text-yellow-600' : 'text-red-600';
                
                return `
                    <tr class="hover:bg-gray-50">
                        <td class="px-4 py-3">
                            <input type="checkbox" class="similarity-checkbox" data-candidate='${JSON.stringify(candidate)}'>
                        </td>
                        <td class="px-4 py-3">
                            <div class="font-medium text-gray-900">${candidate.name}</div>
                            <div class="text-sm text-gray-500">${candidate.category}</div>
                        </td>
                        <td class="px-4 py-3">
                            <div class="flex items-center">
                                <div class="w-16 h-2 bg-gray-200 rounded-full mr-2">
                                    <div class="h-2 similarity-bar rounded-full" style="width: ${similarityPercent}%"></div>
                                </div>
                                <span class="text-sm font-medium">${similarityPercent}%</span>
                            </div>
                            <div class="text-xs ${confidenceColor} font-medium">${confidenceLevel} MATCH</div>
                        </td>
                        <td class="px-4 py-3">
                            <div class="text-sm">${Math.round(candidate.skillsMatch * 100)}%</div>
                        </td>
                        <td class="px-4 py-3">
                            <div class="text-sm">${Math.round(candidate.companyMatch * 100)}%</div>
                        </td>
                        <td class="px-4 py-3">
                            <div class="text-sm">${Math.round(candidate.titleMatch * 100)}%</div>
                        </td>
                        <td class="px-4 py-3">
                            <div class="text-sm">${Math.round(candidate.experienceMatch * 100)}%</div>
                        </td>
                        <td class="px-4 py-3">
                            <button class="text-blue-600 hover:text-blue-800 text-sm">
                                <i class="fas fa-info-circle mr-1"></i>Details
                            </button>
                        </td>
                    </tr>
                `;
            }).join('');
            
            container.classList.remove('hidden');
            
            // Add event listeners
            document.querySelectorAll('.similarity-checkbox').forEach(checkbox => {
                checkbox.addEventListener('change', function() {
                    const candidate = JSON.parse(this.getAttribute('data-candidate'));
                    if (this.checked) {
                        if (!selectedCandidates.find(c => c.name === candidate.name)) {
                            selectedCandidates.push(candidate);
                        }
                    } else {
                        selectedCandidates = selectedCandidates.filter(c => c.name !== candidate.name);
                    }
                    updateSelectedCandidatesDisplay();
                });
            });
        }

        // Toast notifications
        function showToast(message, type = 'success') {
            const toast = document.getElementById('toast');
            const toastMessage = document.getElementById('toastMessage');
            
            toastMessage.textContent = message;
            
            if (type === 'error') {
                toast.firstElementChild.className = 'bg-red-600 text-white px-6 py-3 rounded-lg shadow-lg';
                toast.firstElementChild.innerHTML = `<i class="fas fa-times mr-2"></i><span id="toastMessage">${message}</span>`;
            } else {
                toast.firstElementChild.className = 'bg-green-600 text-white px-6 py-3 rounded-lg shadow-lg';
                toast.firstElementChild.innerHTML = `<i class="fas fa-check mr-2"></i><span id="toastMessage">${message}</span>`;
            }
            
            // Show toast
            toast.classList.remove('translate-x-full');
            
            // Hide after 3 seconds
            setTimeout(() => {
                toast.classList.add('translate-x-full');
            }, 3000);
        }

        // Initialize search on page load
        document.addEventListener('DOMContentLoaded', function() {
            performSearch();
        });
    </script>
</body>
</html>
    <script id="html_badge_script1">
        window.__genspark_remove_badge_link = "https://www.genspark.ai/api/html_badge/" +
            "remove_badge?token=To%2FBnjzloZ3UfQdcSaYfDt59sWUD8HDsJgKEMyZVmrAkPdRc84ssJdaTwG8RF9rPnyIaA8ccHIwUO%2FBEX8oQRZPfJWsqXVz67WqjbM9z%2F32dKd7FQOUUyLURVSR72vjFRI7qE5LzcKKhErapdon89cwYGgxvLqHmxe3hdeYhlYt0Z9dQ57ocKZ4MFUyzEwx32iRaGfnaIRb4mZfkEhorJbCJatylEF7j9HlRWpwwOUwJZ%2BCh1cp2FvhNByLK9jsWoXvNY67l366o3PpZPzD7zi62g2OtbrQQ0%2BPYbznRZEGB7imMSTTFcg1S4avQ%2FfNsznuhWEXfIqbMRcPbIBcY%2FCotG6Gj%2BOl1KC1Un8Hahc%2BoqXzHWkElaJlDgKuJVh3TYg84oMOn4Y0B1tzP4VH5Ai3pw5MFnD27YdATYnCVmCz9f0DmaW0KdxifRCI4RYqoiJL8WKGc%2FK5c8vW3H3LMda1u10xGkveXZY2XT3YRSIkWjYlsGFwojClRjHiF1Kz1vuC38o4ZoJC%2BsllGFgBcTw%3D%3D";
        window.__genspark_locale = "en-US";
        window.__genspark_token = "To/BnjzloZ3UfQdcSaYfDt59sWUD8HDsJgKEMyZVmrAkPdRc84ssJdaTwG8RF9rPnyIaA8ccHIwUO/BEX8oQRZPfJWsqXVz67WqjbM9z/32dKd7FQOUUyLURVSR72vjFRI7qE5LzcKKhErapdon89cwYGgxvLqHmxe3hdeYhlYt0Z9dQ57ocKZ4MFUyzEwx32iRaGfnaIRb4mZfkEhorJbCJatylEF7j9HlRWpwwOUwJZ+Ch1cp2FvhNByLK9jsWoXvNY67l366o3PpZPzD7zi62g2OtbrQQ0+PYbznRZEGB7imMSTTFcg1S4avQ/fNsznuhWEXfIqbMRcPbIBcY/CotG6Gj+Ol1KC1Un8Hahc+oqXzHWkElaJlDgKuJVh3TYg84oMOn4Y0B1tzP4VH5Ai3pw5MFnD27YdATYnCVmCz9f0DmaW0KdxifRCI4RYqoiJL8WKGc/K5c8vW3H3LMda1u10xGkveXZY2XT3YRSIkWjYlsGFwojClRjHiF1Kz1vuC38o4ZoJC+sllGFgBcTw==";
    </script>
    
    <script id="html_notice_dialog_script" src="https://www.genspark.ai/notice_dialog.js"></script>
